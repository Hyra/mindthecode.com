<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="alternative" href="/atom.xml" title="Mindthecode" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>Use GZip with PHP - Mindthecode</title><link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,700" rel="stylesheet" type="text/css"><link rel="stylesheet" href="/css/main.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><link rel="stylesheet" href="/css/prism.css" type="text/css"></head><body><header><a href="/" class="logo"><img src="http://mindthecode.com/logo.png" height="30"></a><nav><ul><li><a href="/">Blog</a></li><li><a href="/about">About</a></li><li><a href="/atom.xml">RSS</a></li></ul></nav></header><main><article class="post"><header><h1><span>Use GZip with PHP</span></h1><h5><span>In this post I will show you how to add GZip to your PHP application</span></h5><time datetime="2016-11-22T16:42:15.000Z" class="post__time">Nov 22 2016</time></header><hr/><p>I recently started using GZip headers in my websites and the results are simply amazing. Right up there with coffee, sneezing polar bears and green traffic lights.</p>
<!-- <div class="teaser" style='background: transparent url(/images/headers/gzip.gif) no-repeat center center;'></div> -->
<p>Nowadays, files are big. People used to optimize graphics and CSS stylesheets. This day and age we just don‚Äôt care anymore. At the same time bandwidth is getting more expensive and the mobile market is growing bigger. Not a good combination.</p>
<h2 id="Enter-GZip"><a href="#Enter-GZip" class="headerlink" title="Enter GZip"></a>Enter GZip</h2><p>Adding GZip to your applications couldn‚Äôt be simpler, and using this compression to your output can reduce the amount of data being sent by around <strong>70-80%</strong> for your average stylesheets. That‚Äôs what you call weight-loss.</p>
<p>I recently built the backend of a mobile application, which relied on a JSON interface. Data being sent to the phone was around <code>250kb</code>. Optimizing the content, only returning the bare minimum the phone needed to work resulted in the file being <code>197kb</code>. So, I added the GZip compression and guess what. The resulting file was <code>14kb</code>. Awesome.</p>
<h2 id="So-how-do-I-use-it"><a href="#So-how-do-I-use-it" class="headerlink" title="So how do I use it"></a>So how do I use it</h2><p>Simple. At the top of your PHP file you add the following:</p>
<pre class=" language-php"><code class="language-php">@<span class="token function">ob_start</span> <span class="token punctuation">(</span><span class="token string">'ob_gzhandler'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">header</span><span class="token punctuation">(</span><span class="token string">'Content-type: text/html; charset: UTF-8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">header</span><span class="token punctuation">(</span><span class="token string">'Cache-Control: must-revalidate'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">header</span><span class="token punctuation">(</span><span class="token string">"Expires: "</span> <span class="token punctuation">.</span> <span class="token function">gmdate</span><span class="token punctuation">(</span><span class="token string">'D, d M Y H:i:s'</span><span class="token punctuation">,</span> <span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">.</span> <span class="token string">' GMT'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter">?></span>
</code></pre>
<p>This will tell the server to first zip the contents, before sending it back to the client, where it is deflated.</p>
<p>The only caveat is that you must have <code>mod_gzip</code> installed as an Apache module, but most hosting providers install this by default. Just make sure yours does too.</p>
<h2 id="As-a-CakePHP-component"><a href="#As-a-CakePHP-component" class="headerlink" title="As a CakePHP component"></a>As a CakePHP component</h2><p><a href="http://josediazgonzalez.com/" title="Jose Gonzales" target="_blank" rel="external">Jose Gonzales</a> made a nice little plugin to use GZip in your Cake Applications. Find it at <a href="https://github.com/josegonzalez/gzip-component/" title="CakePHP Gzip Component" target="_blank" rel="external">Github</a> Basically, all you have to do is add the plugin to your <code>plugins</code> folder, and then add the following to your <code>app_controller.php</code></p>
<pre class=" language-php"><code class="language-php"><span class="token keyword">var</span> <span class="token variable">$components</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string">'Gzip.Gzip'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>And you‚Äôre good to go.</p>
<p>Enjoy!</p>
<hr/><ul class="tags"><li>Tags: </li><li class="post__tag__item"><a href="/tags/php/" class="post__tag__link">php</a></li></ul><a href="https://twitter.com/intent/tweet" class="twitter-share-button">Tweet</a><hr/><h2>Questions or comments?</h2><p>As always, if you have any questions or comments, you can find me on <a href="http://twitter.com/stefvdham"   target="_blank">Twitter</a>.</p><div class="prevnext"><a href="/2011-11-11-installing-phpunit-manually-for-cakephp-2-0/" class="prevnext-prev"><p>‚Üê Prev</p></a><a href="/2012-02-11-spotify-preview-build-expired/" class="prevnext-next"><p>Next ‚Üí</p></a></div></article></main><footer><a href="/"><img src="http://mindthecode.com/images/mtc_inv_white.png" alt="Mindthecode"></a><br><p>Made with ‚ù§ and üç∫</p><p>¬© Copyright 2011-2017</p></footer><script src="/js/main.js"></script><script async="async" type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&amp;serve=C6AILKT&amp;placement=mindthecode" id="_carbonads_js"></script></body></html>