extends layout
block main
  header(class='intro')
    h1 Hi there,
    p I'm Stef van den Ham. I write Sass/LESS/CSS, HTML5, Javascript, PHP, Bash with Sublime Text 2 for fun and profit. I work as CTO at NoProtocol in Amsterdam.

  if collections.posts && collections.posts.length > 0
      each post in collections.posts
        article(class='blog-entry')
          strong #{moment(post.publishDate).format('MMMM Do YYYY')}
          h2
            a(href='/' + post.path)!= post.title
          div!= post.excerpt
  else
    h2= collections.posts.length
    h2 there ain't no posts here, I'm afraid

  script.
    var headers = [];
  each post in collections.posts
    if post.header
      script.
        headers.push('#{post.header}');
  script.
    var items = headers;
    var item = items[Math.floor(Math.random()*items.length)];
    $(document).ready(function() {
      $('.teaser').css('background-image', 'url(/images/headers/' + item);
    });
